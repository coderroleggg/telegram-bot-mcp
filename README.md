# Telegram Bot MCP

MCP (Multi-purpose Computing Platform) для работы с Telegram Bot API. Предоставляет функции для отправки и получения сообщений через Telegram бота.

## Возможности

- Отправка текстовых сообщений в чаты
- Отправка медиа-контента (фото, документы, видео, аудио)
- Создание и отправка опросов
- Получение информации о боте
- Получение обновлений (сообщений, событий) от пользователей
- Удаление сообщений

## Установка

```bash
git clone https://github.com/yourusername/telegram-bot-mcp.git
cd telegram-bot-mcp
pip install -r requirements.txt
```

## Настройка

1. Создайте бота через [@BotFather](https://t.me/BotFather) в Telegram и получите токен
2. Скопируйте файл `.env.example` в `.env`:
   ```bash
   cp .env.example .env
   ```
3. Откройте файл `.env` и добавьте полученный токен:
   ```
   TELEGRAM_BOT_TOKEN=your_bot_token_here
   ```

## Запуск

```bash
python server.py
```

## Доступные функции

- `sendMessage` - отправка текстового сообщения
- `sendPhoto` - отправка фотографии
- `deleteMessage` - удаление сообщения
- `getMe` - получение информации о боте
- `getUpdates` - получение новых сообщений и событий

## Примеры использования

### Отправка сообщения

```python
response = mcp.call("sendMessage", {"chatId": "12345678", "text": "Привет, мир!"})
print(response)
```

### Получение обновлений

```python
updates = mcp.call("getUpdates", {})
for update in updates["updates"]:
    print(update)
```

## Лицензия

MIT

## API-инструменты

### initialize

Инициализирует конфигурацию для Telegram Bot MCP.

**Параметры:**
- `token`: Токен вашего Telegram бота, полученный от @BotFather

### sendMessage

Отправляет текстовое сообщение в указанный чат.

**Параметры:**
- `chatId`: ID чата, куда отправить сообщение (строка или число)
- `text`: Текст сообщения для отправки

### sendPhoto

Отправляет фото в указанный чат.

**Параметры:**
- `chatId`: ID чата, куда отправить фото (строка или число)
- `photoUrl`: URL фотографии или путь к локальному файлу
- `caption`: Подпись к фотографии (опционально)

### sendDocument

Отправляет документ в указанный чат.

**Параметры:**
- `chatId`: ID чата, куда отправить документ (строка или число)
- `documentUrl`: URL документа или путь к локальному файлу
- `caption`: Подпись к документу (опционально)
- `filename`: Имя файла (опционально)

### sendVideo

Отправляет видео в указанный чат.

**Параметры:**
- `chatId`: ID чата, куда отправить видео (строка или число)
- `videoUrl`: URL видео или путь к локальному файлу
- `caption`: Подпись к видео (опционально)
- `duration`: Длительность видео в секундах (опционально)
- `width`: Ширина видео (опционально)
- `height`: Высота видео (опционально)

### sendAudio

Отправляет аудио в указанный чат.

**Параметры:**
- `chatId`: ID чата, куда отправить аудио (строка или число)
- `audioUrl`: URL аудио или путь к локальному файлу
- `caption`: Подпись к аудио (опционально)
- `duration`: Длительность аудио в секундах (опционально)
- `performer`: Исполнитель (опционально)
- `title`: Название трека (опционально)

### sendPoll

Отправляет сообщение с опросом в указанный чат.

**Параметры:**
- `chatId`: ID чата, куда отправить опрос (строка или число)
- `question`: Вопрос опроса
- `options`: Список вариантов ответа (строки)
- `isAnonymous`: Анонимный ли опрос (опционально, по умолчанию True)
- `allowsMultipleAnswers`: Разрешены ли множественные ответы (опционально, по умолчанию False)

### getMe

Получает информацию о боте.

**Параметры:** нет

### getUpdates

Получает обновления (сообщения, события) от Telegram Bot API.

**Параметры:**
- `offset`: ID первого обновления, которое нужно вернуть (опционально)
- `limit`: Максимальное количество обновлений для возврата (опционально, по умолчанию 100)
- `timeout`: Таймаут в секундах (опционально, по умолчанию 0)

### deleteMessage

Удаляет сообщение из чата.

**Параметры:**
- `chatId`: ID чата, из которого нужно удалить сообщение (строка или число)
- `messageId`: ID сообщения, которое нужно удалить (число)

## Как получить chatId?

Чтобы получить ID чата или пользователя, существует несколько способов:

1. Использовать инструмент `getUpdates` и найти нужный ID после отправки сообщения вашему боту

2. Использовать бота вроде @userinfobot: отправьте ему сообщение, и он вернет ваш ID

3. Для групповых чатов: добавьте вашего бота в группу, отправьте сообщение и используйте `getUpdates`, чтобы найти ID группы

## Ограничения

- Бот не может начать общение с пользователем первым, пользователь должен сначала отправить сообщение боту
- Бот может отправлять сообщения только в чаты, где он находится
- Некоторые форматы файлов могут быть ограничены Telegram
- При отправке локальных файлов, они должны быть доступны процессу, в котором работает MCP

## Дополнительная информация

Для получения дополнительной информации о Telegram Bot API:
- [Официальная документация Telegram Bot API](https://core.telegram.org/bots/api)
- [Документация python-telegram-bot](https://python-telegram-bot.readthedocs.io/) 